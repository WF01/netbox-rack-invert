{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p><code>netbox-rack-inverter</code> flips rack numbering direction (<code>ascending &lt;-&gt; descending</code>) while preserving physical rack layout (i.e., reorders devices to maintain their 'physical location').</p> <p>In theory works with all rack sizes, device sizes and is non-destructive. May fix bugs if there's any interest.</p>"},{"location":"#Demo","title":"Demo","text":"<p>Grayed out if a permissions issue exists, otherwise allows a user to toggle individual racks via their [rackid] page.</p>"},{"location":"#What-It-Does","title":"What It Does","text":"<p>This plugin adds one action button on rack detail pages (<code>/dcim/racks/&lt;id&gt;/</code>) to toggle rack unit order while preserving physical placement.</p> <p>When toggled, it updates:</p> <ul> <li><code>Rack.desc_units</code></li> <li><code>Device.position</code> (mounted devices only)</li> <li><code>RackReservation.units</code></li> </ul> <p>No objects are recreated. IDs, relationships, tags, and custom fields remain intact.</p>"},{"location":"#Caveats","title":"Caveats","text":"<p>This plugin is intentionally narrow: it only toggles rack unit orientation and remaps <code>Device.position</code> plus <code>RackReservation.units</code> to preserve physical placement.</p> <p>Before using in production:</p> <ul> <li>Test on dummy/non-production data first</li> <li>Back up your NetBox database</li> <li>Verify the acting user has all required permissions (including object-level permissions)</li> <li>Validate rack data quality (invalid existing positions/reservations will cause safe aborts)</li> </ul> <p>The action is designed to be safe and non-destructive, but any bulk positional change should still be treated as an operational change.</p>"},{"location":"#Safety-Guarantees","title":"Safety Guarantees","text":"<ul> <li>Changes run inside one <code>transaction.atomic()</code> block</li> <li><code>select_for_update()</code> row locks are used for rack, devices, and reservations</li> <li>If any affected object has invalid unit placement, the operation is aborted safely</li> <li>Permissions are enforced both in UI and server-side, including object-level checks for each affected device/reservation</li> <li>Only <code>POST</code> is allowed on the action endpoint</li> <li>If permissions are missing, the button is shown as disabled with a tooltip explaining what is missing</li> </ul>"},{"location":"#Compatibility","title":"Compatibility","text":"<ul> <li>Plugin: <code>0.1.4</code></li> <li>NetBox: <code>4.5.x</code></li> <li>Python: <code>3.12+</code></li> </ul>"},{"location":"#Installation","title":"Installation","text":""},{"location":"#Quick-choose-pick-one","title":"Quick choose (pick one)","text":"<ul> <li>Bare-metal / VM NetBox install (systemd services): use Path A or Path B below.</li> <li>netbox-docker: use Path C below (recommended for Docker users).</li> <li>Air-gapped / offline: use Path D below.</li> </ul>"},{"location":"#Common-placeholders","title":"Common placeholders","text":"<ul> <li><code>&lt;NETBOX_VENV_PYTHON&gt;</code> = Python from the same virtualenv NetBox uses.</li> <li>Typical: <code>/opt/netbox/venv/bin/python</code></li> <li><code>&lt;NETBOX_MANAGE_PY&gt;</code> = NetBox <code>manage.py</code> path.</li> <li>Typical: <code>/opt/netbox/netbox/manage.py</code></li> </ul>"},{"location":"#Path-A-recommended-for-bare-metal-pinned-tag-install","title":"Path A (recommended for bare-metal): pinned tag install","text":"<pre><code>&lt;NETBOX_VENV_PYTHON&gt; -m pip install \"git+https://github.com/WF01/netbox-rack-invert@v0.1.4\"\n</code></pre>"},{"location":"#Path-B-bare-metal-helper-script-auto-detect-install","title":"Path B (bare-metal helper script): auto-detect install","text":"<pre><code>./scripts/install-netbox-plugin.sh\n</code></pre> <p>What the helper script does automatically:</p> <ul> <li>Looks for Python in:</li> <li><code>${NETBOX_ROOT}/venv/bin/python</code></li> <li><code>/opt/netbox/venv/bin/python</code></li> <li><code>/usr/local/netbox/venv/bin/python</code></li> <li>then <code>python3</code> / <code>python</code> fallback</li> <li>Looks for <code>manage.py</code> in:</li> <li><code>${NETBOX_ROOT}/netbox/manage.py</code></li> <li><code>/opt/netbox/netbox/manage.py</code></li> <li><code>/usr/local/netbox/netbox/manage.py</code></li> <li>Installs from <code>requirements/netbox-plugin.txt</code></li> </ul> <p>If your paths are custom, force explicit values:</p> <pre><code>NETBOX_PYTHON=&lt;NETBOX_VENV_PYTHON&gt; NETBOX_MANAGE_PY=&lt;NETBOX_MANAGE_PY&gt; NETBOX_ROOT=&lt;NETBOX_ROOT&gt; ./scripts/install-netbox-plugin.sh\n</code></pre> <p>To persist plugin install across NetBox upgrades:</p> <pre><code>PERSIST_LOCAL_REQUIREMENTS=1 NETBOX_ROOT=&lt;NETBOX_ROOT&gt; ./scripts/install-netbox-plugin.sh\n</code></pre>"},{"location":"#Path-C-netbox-docker-easiest-repeatable-setup","title":"Path C (netbox-docker): easiest repeatable setup","text":"<p>If <code>docker compose build</code> says \"No services to build\", your compose files are image-only. Add a plugin build layer:</p> <ol> <li>Create <code>plugin_requirements.txt</code> in your netbox-docker root:</li> </ol> <pre><code>git+https://github.com/WF01/netbox-rack-invert@v0.1.4\n</code></pre> <ol> <li>Create <code>Dockerfile-Plugins</code> in your netbox-docker root:</li> </ol> <pre><code>FROM netboxcommunity/netbox:latest\nCOPY plugin_requirements.txt /opt/netbox/plugin_requirements.txt\nRUN /usr/local/bin/uv pip install -r /opt/netbox/plugin_requirements.txt\n</code></pre> <ol> <li>Create or update <code>docker-compose.override.yml</code>:</li> </ol> <pre><code>services:\n  netbox:\n    build:\n      context: .\n      dockerfile: Dockerfile-Plugins\n    image: netboxcommunity/netbox:local-plugins\n  netbox-worker:\n    image: netboxcommunity/netbox:local-plugins\n  netbox-housekeeping:\n    image: netboxcommunity/netbox:local-plugins\n</code></pre> <ol> <li>Rebuild/start:</li> </ol> <pre><code>docker compose build --no-cache\ndocker compose up -d\n</code></pre> <ol> <li>Verify package in container:</li> </ol> <pre><code>docker compose exec netbox python -m pip show netbox-rack-inverter\n</code></pre>"},{"location":"#Path-D-offline--air-gapped","title":"Path D (offline / air-gapped)","text":"<p>Build wheel on a connected host:</p> <pre><code>python -m pip install --upgrade build\npython -m build\n</code></pre> <p>Install wheel on NetBox host:</p> <pre><code>&lt;NETBOX_VENV_PYTHON&gt; -m pip install /path/to/netbox_rack_inverter-0.1.4-py3-none-any.whl\n</code></pre>"},{"location":"#After-any-installation-path-enable--finalize","title":"After any installation path: enable + finalize","text":"<ol> <li>Add plugin to <code>configuration/plugins.py</code>:</li> </ol> <pre><code>PLUGINS = [\n    \"netbox_rack_inverter\",\n]\n\nPLUGINS_CONFIG = {\n    \"netbox_rack_inverter\": {},\n}\n</code></pre> <ol> <li>Apply migrations/static:</li> </ol> <pre><code>&lt;NETBOX_VENV_PYTHON&gt; &lt;NETBOX_MANAGE_PY&gt; migrate\n&lt;NETBOX_VENV_PYTHON&gt; &lt;NETBOX_MANAGE_PY&gt; collectstatic --no-input\n</code></pre> <ol> <li> <p>Restart services:</p> </li> <li> <p>Bare-metal: <code>systemctl restart netbox netbox-rq</code></p> </li> <li>Docker: <code>docker compose restart netbox netbox-worker netbox-housekeeping</code></li> </ol>"},{"location":"#Post-install-smoke-checks","title":"Post-install smoke checks","text":"<ul> <li>Package installed:</li> <li>Bare-metal: <code>&lt;NETBOX_VENV_PYTHON&gt; -m pip show netbox-rack-inverter</code></li> <li>Docker: <code>docker compose exec netbox python -m pip show netbox-rack-inverter</code></li> <li>Plugin loaded: check NetBox/worker logs for startup errors.</li> <li>UI check: open a rack page and confirm the toggle action appears.</li> </ul>"},{"location":"#Optional-validation-tests","title":"Optional validation tests","text":"<pre><code>&lt;NETBOX_VENV_PYTHON&gt; &lt;NETBOX_MANAGE_PY&gt; test netbox_rack_inverter.tests -v 2\n</code></pre>"},{"location":"#Permissions-Required","title":"Permissions Required","text":"<ul> <li><code>dcim.view_rack</code> on the rack</li> <li><code>dcim.change_rack</code> on the rack</li> <li><code>dcim.change_device</code> on each affected device</li> <li><code>dcim.change_rackreservation</code> on each affected reservation</li> </ul> <p>If any required permission is missing, the action is denied. Users with <code>dcim.view_rack</code> but missing required change permissions will see a disabled action button with a tooltip that lists missing permissions.</p>"},{"location":"#Scope-and-Limits","title":"Scope and Limits","text":"<ul> <li>The action button appears only on rack detail pages</li> <li>No standalone plugin CRUD views</li> <li>No standalone plugin REST API endpoints</li> <li>Remap scope is intentionally narrow (<code>Device.position</code>, <code>RackReservation.units</code>)</li> </ul>"},{"location":"#Use","title":"Use","text":"<ol> <li>Open a rack detail page.</li> <li>Click <code>Switch to Descending Units</code> or <code>Switch to Ascending Units</code>.</li> <li>Confirm.</li> </ol> <p>Running the action again toggles back to the previous orientation.</p>"},{"location":"#Migration-Notes","title":"Migration Notes","text":"<p>This plugin intentionally defines no custom models.</p> <p>Compatibility migrations include safe legacy cleanup behavior:</p> <ul> <li>Fresh installs create no plugin model tables</li> <li>Legacy scaffold tables are removed only when empty</li> <li>Non-empty legacy scaffold tables are left untouched to avoid destructive changes</li> </ul>"},{"location":"#Testing","title":"Testing","text":""},{"location":"#1-Installer-smoke-tests-fast-no-live-NetBox-required","title":"1) Installer smoke tests (fast, no live NetBox required)","text":"<p>These validate installer behavior such as path auto-detection, explicit overrides, <code>uv</code> fallback, clear failure messaging, and persistence idempotency.</p> <pre><code>bash ./testing/test_install_script.sh\n</code></pre> <p>Or:</p> <pre><code>make test-install-script\n</code></pre>"},{"location":"#2-Full-plugin-test-suite-requires-NetBox-environment","title":"2) Full plugin test suite (requires NetBox environment)","text":"<pre><code>&lt;NETBOX_VENV_PYTHON&gt; &lt;NETBOX_MANAGE_PY&gt; test netbox_rack_inverter.tests -v 2\n</code></pre>"},{"location":"#3-Single-module-test-run-optional","title":"3) Single-module test run (optional)","text":"<pre><code>&lt;NETBOX_VENV_PYTHON&gt; &lt;NETBOX_MANAGE_PY&gt; test netbox_rack_inverter.tests.test_toggle_units_order -v 2\n</code></pre>"},{"location":"#License","title":"License","text":"<p>MIT</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#Changelog","title":"Changelog","text":"<p>All notable changes to this project are documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#Unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#014---2026-02-15","title":"[0.1.4] - 2026-02-15","text":""},{"location":"changelog/#Added","title":"Added","text":"<ul> <li>Added installer smoke-test coverage in <code>testing/test_install_script.sh</code> for auto-detection, explicit path overrides, <code>uv</code> fallback, clear missing <code>manage.py</code> failures, and idempotent <code>local_requirements.txt</code> persistence behavior.</li> <li>Added <code>make test-install-script</code> to run installer smoke tests in one command.</li> </ul>"},{"location":"changelog/#Changed","title":"Changed","text":"<ul> <li>Reworked installation documentation into environment-focused playbooks (bare-metal, netbox-docker, and offline) with clearer placeholders and post-install verification steps.</li> <li>Refreshed README testing guidance to separate fast installer checks from full NetBox integration tests.</li> <li>Bumped release version to <code>0.1.4</code> and updated pinned installation references.</li> </ul>"},{"location":"changelog/#013---2026-02-14","title":"[0.1.3] - 2026-02-14","text":""},{"location":"changelog/#Fixed","title":"Fixed","text":"<ul> <li>Enforced object-level permission checks for every affected <code>Device</code> and <code>RackReservation</code> before toggling rack order.</li> <li>Improved permission UX on rack pages: action button now renders disabled with detailed missing-permission tooltip instead of disappearing.</li> <li>Converted legacy scaffold migration <code>0001_initial</code> to a no-op so fresh installs no longer create an unused plugin model table.</li> <li>Added safe legacy scaffold cleanup migration that removes old scaffold table only when empty.</li> <li>Pinned <code>requirements/netbox-plugin.txt</code> to <code>v0.1.3</code> for reproducible installs.</li> </ul>"},{"location":"changelog/#Added_1","title":"Added","text":"<ul> <li>Regression tests for constrained object permission scenarios (view rejection and disabled-button behavior with details).</li> <li>Installer support for persisting plugin requirement into <code>local_requirements.txt</code> via <code>PERSIST_LOCAL_REQUIREMENTS=1</code>.</li> </ul>"},{"location":"changelog/#Changed_1","title":"Changed","text":"<ul> <li>Bumped release version to <code>0.1.3</code>.</li> <li>Updated <code>README.md</code>, <code>TESTING.md</code>, and contributor guidance to match current plugin scope and install workflows.</li> <li>Simplified <code>Makefile</code> lint/format targets to use actual package paths.</li> </ul>"},{"location":"changelog/#012---2026-02-13","title":"[0.1.2] - 2026-02-13","text":""},{"location":"changelog/#Fixed_1","title":"Fixed","text":"<ul> <li>Limited the rack toggle button to rack objects only.</li> <li>Added permission-aware button rendering (button is hidden unless the user can run the action).</li> <li>Removed unrelated scaffold plugin surface from user-facing navigation and routes.</li> </ul>"},{"location":"changelog/#Changed_2","title":"Changed","text":"<ul> <li>Bumped release version to <code>0.1.2</code>.</li> <li>Updated documentation for installation and feature scope.</li> </ul>"},{"location":"changelog/#Testing","title":"Testing","text":"<ul> <li>Added template-content tests for rack-only rendering and permission-based visibility.</li> <li>Current suite status in local NetBox Docker: <code>41 passed, 0 failed</code>.</li> </ul>"},{"location":"changelog/#011---2026-02-13","title":"[0.1.1] - 2026-02-13","text":""},{"location":"changelog/#Fixed_2","title":"Fixed","text":"<ul> <li>Added row locking for rack/device/reservation toggle operations.</li> <li>Switched from bulk update calls to model <code>save()</code> calls for position/unit writes.</li> <li>Added initial migration for plugin model table creation.</li> </ul>"},{"location":"changelog/#Added_2","title":"Added","text":"<ul> <li>Toggle round-trip tests for mixed-height devices.</li> <li>Tests for non-default <code>starting_unit</code>.</li> <li>Tests for reservations and no-reservations cases.</li> <li>Test coverage for preserving relationships and <code>custom_field_data</code>.</li> </ul>"},{"location":"changelog/#010---2026-02-13","title":"[0.1.0] - 2026-02-13","text":""},{"location":"changelog/#Added_3","title":"Added","text":"<ul> <li>Initial plugin scaffold generated from cookiecutter.</li> </ul>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#Contributing","title":"Contributing","text":"<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p> <p>We love your input! We want to make contributing to this project as easy and transparent as possible, whether it's:</p> <ul> <li>Reporting a bug</li> <li>Discussing the current state of the code</li> <li>Submitting a fix</li> <li>Proposing new features</li> <li>Becoming a maintainer</li> </ul>"},{"location":"contributing/#General-Tips-for-Working-on-GitHub","title":"General Tips for Working on GitHub","text":"<ul> <li>Register for a free GitHub account if you haven't already.</li> <li>You can use GitHub Markdown for formatting text and adding images.</li> <li>To help mitigate notification spam, please avoid \"bumping\" issues with no activity. (To vote an issue up or down, use a  or  reaction.)</li> <li>Please avoid pinging members with <code>@</code> unless they've previously expressed interest or involvement with that particular issue.</li> <li>Familiarize yourself with this list of discussion anti-patterns and make every effort to avoid them.</li> </ul>"},{"location":"contributing/#Types-of-Contributions","title":"Types of Contributions","text":""},{"location":"contributing/#Report-Bugs","title":"Report Bugs","text":"<p>Report bugs at https://github.com/WF01/netbox-rack-inverter/issues.</p> <p>If you are reporting a bug, please include:</p> <ul> <li>Your operating system name and version.</li> <li>Any details about your local setup that might be helpful in troubleshooting.</li> <li>Detailed steps to reproduce the bug.</li> </ul>"},{"location":"contributing/#Fix-Bugs","title":"Fix Bugs","text":"<p>Look through the GitHub issues for bugs. Anything tagged with \"bug\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#Implement-Features","title":"Implement Features","text":"<p>Look through the GitHub issues for features. Anything tagged with \"enhancement\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#Write-Documentation","title":"Write Documentation","text":"<p>Netbox Rack Inverter could always use more documentation, whether as part of the official Netbox Rack Inverter docs, in docstrings, or even on the web in blog posts, articles, and such.</p>"},{"location":"contributing/#Submit-Feedback","title":"Submit Feedback","text":"<p>The best way to send feedback is to file an issue at https://github.com/WF01/netbox-rack-inverter/issues.</p> <p>If you are proposing a feature:</p> <ul> <li>Explain in detail how it would work.</li> <li>Keep the scope as narrow as possible, to make it easier to implement.</li> <li>Remember that this is a volunteer-driven project, and that contributions   are welcome :)</li> </ul>"},{"location":"contributing/#Get-Started","title":"Get Started!","text":"<p>Ready to contribute? Here's how to set up <code>netbox-rack-inverter</code> for local development.</p> <ol> <li>Fork the <code>netbox-rack-inverter</code> repo on GitHub.</li> <li> <p>Clone your fork locally</p> <pre><code>$ git clone git@github.com:your_name_here/netbox-rack-inverter.git\n</code></pre> </li> <li> <p>Activate the NetBox virtual environment (see the NetBox documentation under Setting up a Development Environment):</p> <pre><code>$ source ~/.venv/netbox/bin/activate\n</code></pre> </li> <li> <p>Install the plugin in editable mode:</p> <pre><code>$ python -m pip install -e .\n</code></pre> </li> <li> <p>Create a branch for local development:</p> <pre><code>$ git checkout -b name-of-your-bugfix-or-feature\n</code></pre> <p>Now you can make your changes locally.</p> </li> <li> <p>Commit your changes and push your branch to GitHub:</p> <pre><code>$ git add .\n$ git commit -m \"Your detailed description of your changes.\"\n$ git push origin name-of-your-bugfix-or-feature\n</code></pre> </li> <li> <p>Submit a pull request through the GitHub website.</p> </li> </ol>"},{"location":"contributing/#Pull-Request-Guidelines","title":"Pull Request Guidelines","text":"<p>Before you submit a pull request, check that it meets these guidelines:</p> <ol> <li>The pull request should include tests.</li> <li>If the pull request adds functionality, the docs should be updated. Put    your new functionality into a function with a docstring, and add the    feature to the list in README.md.</li> <li>The pull request should work for Python 3.12, 3.13, and 3.14. Check    https://github.com/WF01/netbox-rack-inverter/actions    and make sure that the tests pass for all supported Python versions.</li> </ol>"},{"location":"contributing/#Deploying","title":"Deploying","text":"<p>A reminder for the maintainers on how to deploy. Make sure all your changes are committed (including an entry in CHANGELOG.md) and that all tests pass. Then in the github project go to <code>Releases</code> and create a new release with a new tag.  This will automatically upload the release to pypi:</p>"}]}